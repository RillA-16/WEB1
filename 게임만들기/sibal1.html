<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>하트 찾기 게임</title>
    <style>
        #main {
            margin: 5% calc(calc(100% - 500px)/2);
            width: 500px;
            height: 70%;
        }

        #change {
            margin: 0% 15%;
            width: 70%;
            height: 20%;
            text-align: center;
        }

        .index {
            width: 120px;
            display: inline-flex;
        }

        img {
            text-align: center;
            width: 120px;
            height: 150px;
        }
    </style>
    <script>
        var change;
        var index;
        var checkCount = 1;
        var open1;
        var array =
            [0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 1];

        function init() {
            change = document.getElementById("change");
            change.onclick = change1;
            open1 = document.getElementById("main");
            open1.addEventListener('click', open);

        }
        function change1() {//change버튼 클릭

            //지우고
            var index = Array[16];
            index = document.getElementsByClassName("index");
            for (var j = 0; j < 16; j++) {
                index[j].innerHTML = "";
            }

            array.sort(function () { //배열 내부값 0, 1 랜덤 설정
                return Math.random() - Math.random();
            });

            //생성
            for (var i = 0; i < index.length; i++) {
                var img = document.createElement("img");
                img.src = 'media/back.png';
                img.setAttribute('code', i);

                index[i].appendChild(img);

            }
        }

        function open(e) {

            index = document.getElementsByClassName("index");
            var memory = e.target.getAttribute('code');


            if (array[memory] == 1) {
                alert("성공");

                var index = Array[16];
                index = document.getElementsByClassName("index");
                for (var j = 0; j < 16; j++) {
                    index[j].innerHTML = "";
                }

                for (var i = 0; i < index.length; i++) {
                    var img = document.createElement("img");
                    img.src = 'media/heart.png';
                    index[i].appendChild(img);

                }
                e.target.src = 'media/heart.png';

            } else {
                if (memory == 111) {
                    alert("이미 뒤집은 카드입니다");
                }
                else if (checkCount == 15) {
                    alert("실패");
                    var index = Array[16];
                    index = document.getElementsByClassName("index");
                    for (var j = 0; j < 16; j++) {
                        index[j].innerHTML = "";
                    }
                    checkCount = 1;
                } else {
                    alert("실패");
                    e.target.setAttribute('code', 111);
                    checkCount++;
                    e.target.src = 'media/spade-A.png';
                }
            }
        }


    </script>
</head>


<body onload="init()">
    <div id='main'>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
        <div class='index'></div>
    </div>
    <div id='change'><input type='button' value='하트 위치 변경'></div>


</body>

</html>